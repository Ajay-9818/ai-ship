<!DOCTYPE html>
{% set currentLang = page.lang or site.language or 'zh' %}
<html lang="{{ currentLang }}" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if title %}{{ title }} · {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ description or site.description }}">
  {% include 'partials/meta.njk' %}
  <link rel="preload" href="/assets/main.css" as="style">
  <link rel="stylesheet" href="/assets/main.css">
  <script>document.documentElement.dataset.theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');</script>
</head>
<body>
    {% include 'sprite.svg' %}
    <div class="site-header__top">
      <div class="site-controls">
        <div class="control-group">
        <button type="button" class="control-btn" data-control="theme" aria-label="切换主题">
            <svg class="control-icon" aria-hidden="true"><use href="#icon-palette" /></svg>
        </button>
        <div class="control-menu" data-menu="theme">
            <button type="button" class="menu-item" data-theme="light">浅色</button>
            <button type="button" class="menu-item" data-theme="dark">深色</button>
            <button type="button" class="menu-item" data-theme="auto">跟随系统</button>
        </div>
        </div>
        <div class="control-group">
        <button type="button" class="control-btn" data-control="language" aria-label="切换语言">
            <svg class="control-icon" aria-hidden="true"><use href="#icon-languages" /></svg>
        </button>
        <div class="control-menu" data-menu="language">
            <button type="button" class="menu-item" data-lang="zh">中文</button>
            <button type="button" class="menu-item" data-lang="en">English</button>
            <button type="button" class="menu-item" data-lang="jp">日本語</button>
        </div>
        </div>
      </div>
    </div>
  <header class="site-header" id="about">
    <div class="container">
      <h1 class="site-title"><span class="site-title__text">{{ site.title }}</span><span class="site-title__icon" aria-hidden="true"><svg class="icon icon-sailboat" width="80" height="80" fill="none"><use href="#icon-sailboat" /></svg></span></h1>
      <p class="site-description">{{ site.description }}</p>
      <nav class="site-nav" aria-label="主导航">
        <ul>
          {% for item in navigation %}
            <li><a href="{{ item.url }}">{{ item.key | t(currentLang) }}</a></li>
          {% endfor %}
        </ul>
      </nav>
    </div>
  </header>

  <main class="site-main">
    {{ content | safe }}
  </main>

  <footer class="site-footer" id="support">
    <div class="container">
      <p>© {{ buildTime | year }} {{ site.title }}</p>
      <p>构建方式：Eleventy 静态站点 + 原生前端。</p>
    </div>
  </footer>

  <script src="/assets/app.js" type="module" defer></script>
</body>
</html>
